'use strict';function controls_touch(app){var right_arrow,up_arrow,left_arrow,down_arrow,right_giro,left_giro;var jump=0;var attack=0;var view_tps=0;var view_FPS=0;var view_orbit=0;var fly=0;var touch_start_pos=new Float32Array(2);var touch_start_pos_giro=new Float32Array(2);var move_touch_idx;var giro_touch_idx;var jump_touch_idx;var attack_touch_idx;var view_tps_touch_idx;var view_FPS_touch_idx;var view_orbit_touch_idx;var fly_touch_idx;var tap_elem=document.getElementById("Control_Tap");var giro_tap_elem=document.getElementById("Control_Giro_Tap");var control_elem=document.getElementById("Control_Circle");var tap_elem_offset=tap_elem.clientWidth/2;var giro_tap_elem_offset=giro_tap_elem.clientWidth/2;var ctrl_elem_offset=control_elem.clientWidth/2;function touch_start_cb(event){if(!app.stat_change_char){event.preventDefault();var h=window.innerHeight;var w=window.innerWidth;var touches=event.changedTouches;var touches_giro=event.changedTouches;for(var i=0;i<touches.length;i++){var touch=touches[i];var x=touch.clientX;var y=touch.clientY;if(x>w/2)
break;touch_start_pos[0]=x;touch_start_pos[1]=y;move_touch_idx=touch.identifier;tap_elem.style.visibility="visible";tap_elem.style.left=x-tap_elem_offset+"px";tap_elem.style.top=y-tap_elem_offset+"px";control_elem.style.visibility="visible";control_elem.style.zIndex=2;control_elem.style.left=x-ctrl_elem_offset+"px";control_elem.style.top=y-ctrl_elem_offset+"px";}
for(var i=0;i<touches_giro.length;i++){var touch_giro=touches_giro[i];var x=touch_giro.clientX;var y=touch_giro.clientY;if(x<w/2)
break;touch_start_pos_giro[0]=x;touch_start_pos_giro[1]=y;giro_touch_idx=touch_giro.identifier;giro_tap_elem.style.visibility="visible";giro_tap_elem.style.zIndex=2;giro_tap_elem.style.left=x-giro_tap_elem_offset+"px";giro_tap_elem.style.top=y-giro_tap_elem_offset+"px";}}}
function touch_jump_cb(event){event.preventDefault();var touches=event.changedTouches;for(var i=0;i<touches.length;i++){var touch=touches[i];jump=1;jump_touch_idx=touch.identifier;console.log("se ha pinchado o touch al control jump con tantos touch:"+i);app.ExternalInterface.setup_touch_controls(right_arrow,up_arrow,left_arrow,down_arrow,jump,attack,view_tps,view_FPS,view_orbit,fly,right_giro,left_giro);}}
function touch_attack_cb(event){event.preventDefault();var touches=event.changedTouches;for(var i=0;i<touches.length;i++){var touch=touches[i];attack_touch_idx=touch.identifier;}
attack=1;app.ExternalInterface.setup_touch_controls(right_arrow,up_arrow,left_arrow,down_arrow,jump,attack,view_tps,view_FPS,view_orbit,fly,right_giro,left_giro);}
function touch_fly_cb(event){event.preventDefault();var touches=event.changedTouches;for(var i=0;i<touches.length;i++){var touch=touches[i];fly_touch_idx=touch.identifier;}
fly=1;app.ExternalInterface.setup_touch_controls(right_arrow,up_arrow,left_arrow,down_arrow,jump,attack,view_tps,view_FPS,view_orbit,fly,right_giro,left_giro);}
function touch_view_tps_cb(event){event.preventDefault();var touches=event.changedTouches;for(var i=0;i<touches.length;i++){var touch=touches[i];view_tps_touch_idx=touch.identifier;}
view_tps=1;app.ExternalInterface.setup_touch_controls(right_arrow,up_arrow,left_arrow,down_arrow,jump,attack,view_tps,view_FPS,view_orbit,fly,right_giro,left_giro);}
function touch_view_FPS_cb(event){event.preventDefault();var touches=event.changedTouches;for(var i=0;i<touches.length;i++){var touch=touches[i];view_FPS_touch_idx=touch.identifier;}
view_FPS=1;app.ExternalInterface.setup_touch_controls(right_arrow,up_arrow,left_arrow,down_arrow,jump,attack,view_tps,view_FPS,view_orbit,fly,right_giro,left_giro);}
function touch_view_orbit_cb(event){event.preventDefault();var touches=event.changedTouches;for(var i=0;i<touches.length;i++){var touch=touches[i];view_orbit_touch_idx=touch.identifier;}
view_orbit=1;app.ExternalInterface.setup_touch_controls(right_arrow,up_arrow,left_arrow,down_arrow,jump,attack,view_tps,view_FPS,view_orbit,fly,right_giro,left_giro);}
function touch_move_cb(event){event.preventDefault();up_arrow=0;down_arrow=0;left_arrow=0;right_arrow=0;right_giro=0;left_giro=0;var h=window.innerHeight;var w=window.innerWidth;var touches=event.changedTouches;var touches_giro=event.changedTouches;for(var i=0;i<touches.length;i++){var touch=touches[i];var x=touch.clientX;var y=touch.clientY;if(x>w/2)
break;tap_elem.style.left=x-tap_elem_offset+"px";tap_elem.style.top=y-tap_elem_offset+"px";var d_x=x-touch_start_pos[0];var d_y=y-touch_start_pos[1];var r=Math.sqrt(d_x*d_x+d_y*d_y);if(r<16)
break;var cos=d_x/r;var sin=-d_y/r;if(cos>Math.cos(3*Math.PI/8))
right_arrow=1;else if(cos<-Math.cos(3*Math.PI/8))
left_arrow=1;if(sin>Math.sin(Math.PI/8))
up_arrow=1;else if(sin<-Math.sin(Math.PI/8))
down_arrow=1;console.log("el container de app es:"+app.container.id);console.log("estamos moviendonos adelante en FPS o TPS en el javascript");app.ExternalInterface.setup_touch_controls(right_arrow,up_arrow,left_arrow,down_arrow,jump,attack,view_tps,view_FPS,view_orbit,fly,right_giro,left_giro);}
for(var i=0;i<touches_giro.length;i++){var touch_giro=touches_giro[i];var x=touch_giro.clientX;var y=touch_giro.clientY;if(x<w/2)
break;giro_tap_elem.style.left=x-giro_tap_elem_offset+"px";giro_tap_elem.style.top=y-giro_tap_elem_offset+"px";var d_x=x-touch_start_pos_giro[0];var d_y=y-touch_start_pos_giro[1];var r=Math.sqrt(d_x*d_x+d_y*d_y);if(r<16)
break;var cos=d_x/r;var sin=-d_y/r;if(cos>Math.cos(3*Math.PI/8))
right_giro=1;else if(cos<-Math.cos(3*Math.PI/8))
left_giro=1;app.ExternalInterface.setup_touch_controls(right_arrow,up_arrow,left_arrow,down_arrow,jump,attack,view_tps,view_FPS,view_orbit,fly,right_giro,left_giro);}}
function touch_end_cb(event){event.preventDefault();var touches=event.changedTouches;var touches_giro=event.changedTouches;for(var i=0;i<touches.length;i++){if(touches[i].identifier==move_touch_idx){up_arrow=0;down_arrow=0;left_arrow=0;right_arrow=0;tap_elem.style.visibility="hidden";control_elem.style.visibility="hidden";control_elem.style.zIndex=0;move_touch_idx=null;app.ExternalInterface.setup_touch_controls(right_arrow,up_arrow,left_arrow,down_arrow,jump,attack,view_tps,view_FPS,view_orbit,fly,right_giro,left_giro);}else if(touches[i].identifier==jump_touch_idx){jump=0;jump_touch_idx=null;console.log("se libero el touch del boton jump con para tantos touch:"+i)
app.ExternalInterface.setup_touch_controls(right_arrow,up_arrow,left_arrow,down_arrow,jump,attack,view_tps,view_FPS,view_orbit,fly,right_giro,left_giro);}else if(touches[i].identifier==attack_touch_idx){attack=0;attack_touch_idx=null;app.ExternalInterface.setup_touch_controls(right_arrow,up_arrow,left_arrow,down_arrow,jump,attack,view_tps,view_FPS,view_orbit,fly,right_giro,left_giro);}
else if(touches[i].identifier==fly_touch_idx){fly=0;fly_touch_idx=null;app.ExternalInterface.setup_touch_controls(right_arrow,up_arrow,left_arrow,down_arrow,jump,attack,view_tps,view_FPS,view_orbit,fly,right_giro,left_giro);}
else if(touches[i].identifier==view_tps_touch_idx){console.log("se dejo de pulsar sobre boton control view para el caso de ser tps");view_tps=0;view_tps_touch_idx=null;app.ExternalInterface.setup_touch_controls(right_arrow,up_arrow,left_arrow,down_arrow,jump,attack,view_tps,view_FPS,view_orbit,fly,right_giro,left_giro);}
else if(touches[i].identifier==view_FPS_touch_idx){console.log("se dejo de pulsar sobre boton control view para el caso de ser Fps");view_FPS=0;view_FPS_touch_idx=null;app.ExternalInterface.setup_touch_controls(right_arrow,up_arrow,left_arrow,down_arrow,jump,attack,view_tps,view_FPS,view_orbit,fly,right_giro,left_giro);}
else if(touches[i].identifier==view_orbit_touch_idx){console.log("se dejo de pulsar sobre boton control view para el caso de ser Fps");view_orbit=0;view_orbit_touch_idx=null;app.ExternalInterface.setup_touch_controls(right_arrow,up_arrow,left_arrow,down_arrow,jump,attack,view_tps,view_FPS,view_orbit,fly,right_giro,left_giro);}}
for(var i=0;i<touches_giro.length;i++){if(touches_giro[i].identifier==giro_touch_idx){left_giro=0;right_giro=0;giro_tap_elem.style.visibility="hidden";giro_touch_idx=null;giro_tap_elem.style.zIndex=0;app.ExternalInterface.setup_touch_controls(right_arrow,up_arrow,left_arrow,down_arrow,jump,attack,view_tps,view_FPS,view_orbit,fly,right_giro,left_giro);}}}
document.getElementById("Container").addEventListener("touchstart",touch_start_cb,false);document.getElementById("Container").addEventListener("touchmove",touch_move_cb,false);document.getElementById("Container").addEventListener("touchend",touch_end_cb,false);parent.document.getElementById("Controls").addEventListener("touchend",touch_end_cb,false);parent.document.getElementById("Control_Attack").addEventListener("touchstart",touch_attack_cb,false);parent.document.getElementById("Control_Fly").addEventListener("touchstart",touch_fly_cb,false);parent.document.getElementById("Control_View_TPS").addEventListener("touchstart",touch_view_tps_cb,false);parent.document.getElementById("Control_View_FPS").addEventListener("touchstart",touch_view_FPS_cb,false);parent.document.getElementById("Control_View_Orbit").addEventListener("touchstart",touch_view_orbit_cb,false);}
function sound_listener_full(app){var stat_audio_context_creat=0;document.getElementById("F01_Sound").addEventListener('change',e=>{if(e.target.checked){var context=new(window.AudioContext||window.webkitAudioContext);context.resume().then(()=>{console.log('Playback resumed successfully');var sound_listener=new v3d.AudioListener();var audioElement=document.getElementById('music');var sound_positional=new v3d.PositionalAudio(sound_listener);if(!stat_audio_context_creat){sound_positional.setMediaElementSource(audioElement);stat_audio_context_creat=1;sound_positional.setRefDistance(1);sound_positional.setDirectionalCone(210,230,0.1);}
audioElement.play();app.camera.add(sound_listener);app.scene.add(sound_positional);app.ExternalInterface.sound_listener_cb(sound_positional,sound_listener);});}});}
function init_audio_elements(puntos_acumulados_elements_name){var container=document.createElement("div");container.className="points_container";var name_label=document.createElement("label");name_label.className="text_label";name_label.textContent=puntos_acumulados_elements_name;_value_label=document.createElement("label");_value_label.className="value_label";_value_label.setAttribute("id",puntos_acumulados_elements_name);container.appendChild(name_label);container.appendChild(_value_label);_main_points_container.appendChild(container);_main_points_container.style.opacity=1;_value_label.textContent="0";return _value_label;}
function store_set_level_params(app){parent.document.getElementById("Game_Restart_Dialeg_Sub").addEventListener('click',click,true);parent.document.getElementById("Game_Exit_Dialeg_Sub").addEventListener('click',click,true);parent.document.getElementById("Next_Level_Dialeg_Sub").addEventListener('click',click,true);parent.document.getElementById("Menu_Restart").addEventListener('click',click,true);function click(e){var data_file_local_clear,obj_params_json;data_file_local_clear=localStorage.getItem("STORAGE_CLEAR");if(!data_file_local_clear){var data_params_game,data_file;data_params_game={"level":app.level,"score":app.score,"time_game":app.time_full_game,"language":app.lang,"current_char":app.char_current};data_file=JSON.stringify(data_params_game);localStorage.setItem("STORAGE_LEVEL01",data_file);console.log("click next, restart, etc, deberiamos ver actualizado el storage desde app. con el personaje actual, legugaje, score alcanzados, level , etc");console.log("ahora despues de este se dara el de puzzle que ya sale del programa juego y abre una nueva o recarga la actual");console.log("el valor de app.char_current antes de pasarlo a storage para disponer de el en otra sesion es:"+app.char_current);}}}
function store_get_level_params(app){var locker=parent.document.getElementById("Locker");var shadow=parent.document.getElementById("Canvas_Shadow");var Startout_Button=parent.document.getElementById("Startout_Button");Startout_Button.addEventListener('click',click);function click()
{var data_file_local_clear,obj_params_json_clear;data_file_local_clear=localStorage.getItem("STORAGE_CLEAR");if(!data_file_local_clear)
{var data_file_local,obj_params_json;data_file_local=localStorage.getItem("STORAGE_LEVEL01");obj_params_json=JSON.parse(data_file_local);var storageprevi=1;if(app.stat_change_char)
{locker.style.display="none";locker.style.zIndex=0;shadow.style.display="none";shadow.style.zIndex=0;shadow.style.visibility="hidden";app.ExternalInterface.storage_get_level_parameters_cb(obj_params_json.level,obj_params_json.score,obj_params_json.time_game,obj_params_json.language,app.char_current,storageprevi,app.stat_clear_storage);}else if((!app.stat_change_char)&&(data_file_local))
{app.ExternalInterface.storage_get_level_parameters_cb(obj_params_json.level,obj_params_json.score,obj_params_json.time_game,obj_params_json.language,obj_params_json.current_char,storageprevi,app.stat_clear_storage);console.log("no estamos en escena change char y su estado es 0 en puzzle o app");console.log("stamos en boton load escene y char leido del storage es:"+obj_params_json.current_char);}
else if((!app.stat_change_char)&&(!data_file_local))
{console.log("estamos en sin datos previs level storage ni clear storage, luego recogemos de app todo");app.ExternalInterface.storage_get_level_parameters_cb(app.level,app.score,app.time_full_game,app.lang,app.char_current,storageprevi,app.stat_clear_storage);}}
else if(data_file_local_clear)
{app.stat_clear_storage=1;obj_params_json_clear=JSON.parse(data_file_local_clear);app.ExternalInterface.storage_get_level_parameters_cb(app.level,app.score,app.time_full_game,app.lang,app.char_current,storageprevi,app.stat_clear_storage);console.log("en estado chek clear storage pasamos app actualizadas a puzzle")}}}
function store_get_state_game_cb(app){document.getElementById("Control_Load_Previ_Stat").addEventListener('click',e=>{var data_file_local,obj_params_json;data_file_local=localStorage.getItem("STORAGE_STATE01");if(data_file_local){obj_params_json=JSON.parse(data_file_local);console.log("hemos cliqueado con puzzle event sobre load buton state");app.ExternalInterface.storage_get_state_game_cb(obj_params_json.pos_X_person,obj_params_json.pos_Y_person,obj_params_json.pos_Z_person,obj_params_json.current_char,obj_params_json.current_level,obj_params_json.current_lang,obj_params_json.current_time,obj_params_json.current_score);}});}
window.addEventListener('load',function(){var _joystick2_position_x=1;var _joystick2_position_y=2;(function(){var params=v3d.AppUtils.getPageParams();var PUZZLES_DIR='../../puzzles/';var logicURL=params.logic?params.logic:'__LOGIC__visual_logic.min.js'.replace('__LOGIC__','');var sceneURL=params.load?params.load:'__URL__atlantida.gltf'.replace('__URL__','');if(!sceneURL){console.log('No scene URL specified');return;}
v3d.Cache.enabled=true;if(v3d.AppUtils.isXML(logicURL)){var logicURLJS=logicURL.match(/(.*)\.xml$/)[1]+'.js';new v3d.PuzzlesLoader().loadEditorWithLogic(PUZZLES_DIR,logicURLJS,function(){var initOptions=v3d.PL?v3d.PL.execInitPuzzles().initOptions:{useFullscreen:true};loadScene(sceneURL,initOptions);});}else if(v3d.AppUtils.isJS(logicURL)){new v3d.PuzzlesLoader().loadLogic(logicURL,function(){var initOptions=v3d.PL?v3d.PL.execInitPuzzles().initOptions:{useFullscreen:true};loadScene(sceneURL,initOptions);});}else{loadScene(sceneURL,{useFullscreen:true});}})();function loadScene(sceneURL,initOptions){initOptions=initOptions||{};var ctxSettings={};if(initOptions.useBkgTransp)ctxSettings.alpha=true;if(initOptions.preserveDrawBuf)ctxSettings.preserveDrawingBuffer=true;var preloader=initOptions.useCustomPreloader?createCustomPreloader(initOptions.preloaderProgressCb,initOptions.preloaderEndCb):new v3d.SimplePreloader({container:'Container'});var app=new v3d.App('Container',ctxSettings,preloader);if(initOptions.useBkgTransp){app.clearBkgOnLoad=true;app.renderer.setClearColor(0x000000,0);}
app.ExternalInterface={};prepareExternalInterface(app);if(initOptions.preloaderStartCb)initOptions.preloaderStartCb();if(initOptions.useFullscreen){initFullScreen();}else{var fsButton=document.getElementById('fullscreen_button');if(fsButton)fsButton.style.display='none';}
sceneURL=initOptions.useCompAssets?sceneURL+'.xz':sceneURL;app.loadScene(sceneURL,function(){app.enableControls();app.run();if(v3d.PE)v3d.PE.updateAppInstance(app);if(v3d.PL)v3d.PL.init(app,initOptions);runCode(app);},null,function(){console.log('Can\'t load the scene '+sceneURL);});return app;}
function createCustomPreloader(updateCb,finishCb){function CustomPreloader(){v3d.Preloader.call(this);}
CustomPreloader.prototype=Object.assign(Object.create(v3d.Preloader.prototype),{onUpdate:function(percentage){v3d.Preloader.prototype.onUpdate.call(this,percentage);if(updateCb)updateCb(percentage);},onFinish:function(){v3d.Preloader.prototype.onFinish.call(this);if(finishCb)finishCb();}});return new CustomPreloader();}
function initFullScreen(){var fsButton=document.getElementById('fullscreen_button');if(!fsButton)return;if(document.fullscreenEnabled||document.webkitFullscreenEnabled||document.mozFullScreenEnabled||document.msFullscreenEnabled)
fullscreen_button.style.display='inline';fullscreen_button.addEventListener('click',function(event){event.stopPropagation();if(document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement){exitFullscreen();}else
requestFullscreen(document.body);});function changeFullscreen(){if(document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement)
fullscreen_button.className='fullscreen-close';else
fullscreen_button.className='fullscreen-open';}
document.addEventListener('webkitfullscreenchange',changeFullscreen);document.addEventListener('mozfullscreenchange',changeFullscreen);document.addEventListener('msfullscreenchange',changeFullscreen);document.addEventListener('fullscreenchange',changeFullscreen);function requestFullscreen(elem){if(elem.requestFullscreen)
elem.requestFullscreen();else if(elem.mozRequestFullScreen)
elem.mozRequestFullScreen();else if(elem.webkitRequestFullscreen)
elem.webkitRequestFullscreen();else if(elem.msRequestFullscreen)
elem.msRequestFullscreen();}
function exitFullscreen(){if(document.exitFullscreen)
document.exitFullscreen();else if(document.mozCancelFullScreen)
document.mozCancelFullScreen();else if(document.webkitExitFullscreen)
document.webkitExitFullscreen();else if(document.msExitFullscreen)
document.msExitFullscreen();}}
function prepareExternalInterface(app){function init_recargar_parametros_previos(){var container=document.createElement("div");container.className="recargar-parametros-previos";var name_label=document.createElement("label");name_label.className="text_label";container.setAttribute("id","Recargar_Parametros_Previos");container.appendChild(name_label);document.body.appendChild(container);container.appendChild(name_label)
container.style.opacity=1;}
app.ExternalInterface.store_init_cb=function(level,score,time,lang,stat_game_finised,char_current,stat_change_char){var obj_params_json_clear,data_file_clear;var data_file_clear=localStorage.getItem("STORAGE_CLEAR");obj_params_json_clear=JSON.parse(data_file_clear);var data_file_local,obj_params_json;data_file_local=localStorage.getItem("STORAGE_LEVEL01");obj_params_json=JSON.parse(data_file_local);if((data_file_clear)||(data_file_local))
{if(data_file_clear)
{app.stat_clear_storage=1;var setting_change_char_icon=document.getElementById("Sound_Id");app.icon_setting_on=1;setting_change_char_icon.style.display="block";console.log("estamos esperando unclick sobre icono setting o sound-id para lanzar select char al no haber datos previs");app.level=level;app.score=score;app.time_full_game=time;app.lang=lang;app.char_current=char_current;app.stat_change_char=stat_change_char;console.log("se supone hemos llegado por segunda vez aui y mostramos setting o icono sonido de change char:");console.log("ahora al no haber estado previo por no desearlo usuario aqui actualizamos las app variables");console.log("y el click siguiente de load juego las pasa a puzzle en main section ");}
if(data_file_local){if((!stat_game_finised)&&(!stat_change_char)&&(!app.icon_setting_on))
{console.log("el idioma preferido en la sesion  anterior es:"+obj_params_json.language);var locker=parent.document.getElementById("Locker");locker.style.display="block";locker.style.zIndex=2;var shadow=parent.document.getElementById("Canvas_Shadow");shadow.style.display="block";shadow.style.zIndex=1;shadow.style.visibility="visible";}
else if(stat_game_finised)
{app.level=level;app.score=score;app.time_full_game=time;app.lang=lang;app.char_current=char_current;console.log("el idioma en esta sesion fue:"+lang);}
else if(stat_change_char)
{console.log("estamos en change char escena");console.log("el idioma preferido en la sesion  anterior es:"+obj_params_json.language);var Locker=parent.document.getElementById("Locker");Locker.style.display="block";app.level=level;app.score=score;app.time_full_game=time;app.lang=lang;app.char_current=char_current;app.stat_change_char=stat_change_char;console.log("el idioma en esta sesion fue:"+lang);}}}
else
if((!data_file_clear)&&(!data_file_local))
{if(!app.icon_setting_on)
{var setting_change_char_icon=document.getElementById("Sound_Id");app.icon_setting_on=1;setting_change_char_icon.style.display="block";console.log("estamos esperando unclick sobre icono setting o sound-id para lanzar select char al no haber datos previs");}
if(stat_change_char)
{app.level=level;app.score=score;app.time_full_game=time;app.lang=lang;app.char_current=char_current;app.stat_change_char=stat_change_char;console.log("el idioma en esta sesion fue:"+lang);}
else if(stat_game_finised)
{app.level=level;app.score=score;app.time_full_game=time;app.lang=lang;app.char_current=char_current;console.log("el idioma en esta sesion fue:"+lang);}}}
app.ExternalInterface.storage_set_state_game_cb=function(current_position_X,current_position_Y,current_position_Z,current_char_local,current_level_local,current_lang_local,current_time_local,current_score_local){var data_params_game,data_file;data_params_game={"pos_X_person":current_position_X,"pos_Y_person":current_position_Y,"pos_Z_person":current_position_Z,"current_char":current_char_local,"current_level":current_level_local,"current_lang":current_lang_local,"current_time":current_time_local,"current_score":current_score_local};data_file=JSON.stringify(data_params_game);localStorage.setItem("STORAGE_STATE01",data_file);console.log("deberia haberse guraddaod en la consola apartado debuger for storage local 5 parametros");}
app.ExternalInterface.set_stat_view=function(stat_view,view){var type_camera1="orbit",type_camera2="TPS",type_camera3="FPS",type_camera4="change_char";if(view==type_camera1)
app.stat_view_orbit=stat_view;else if(view==type_camera2)
app.stat_view_TPS=stat_view;else if(view==type_camera3)
app.stat_view_FPS=stat_view;else if(view==type_camera4)
app.stat_change_char=stat_view;}
app.ExternalInterface.switch_lang=function(lang){document.body.setAttribute("lang",lang);parent.document.body.setAttribute("lang",lang);app.lang=lang;}
app.ExternalInterface.storage_clear=function(stat_clear_storage){if(stat_clear_storage){localStorage.removeItem("STORAGE_LEVEL01");localStorage.removeItem("STORAGE_STATE01");var data_params_game,data_file;data_params_game={"stat_clear_storage":stat_clear_storage};data_file=JSON.stringify(data_params_game);localStorage.setItem("STORAGE_CLEAR",data_file);}else if(!stat_clear_storage){var data_file_local,obj_params_json;data_file_local=localStorage.getItem("STORAGE_CLEAR");if(data_file_local)
localStorage.removeItem("STORAGE_CLEAR");}
console.log("el valor actual stat_clear_storage de abrir solo el f02 es;"+stat_clear_storage);app.stat_clear_storage=stat_clear_storage;}
app.ExternalInterface.casset_music_cb=function(sound_casset){if(!sound_casset){var audioElement=document.getElementById('music');audioElement.pause();}}
app.ExternalInterface.game_exit_sub_btn_cb=function(){location.reload();}
app.ExternalInterface.game_restart_sub_btn_cb=function(){location.reload();console.log("deberia quedar claro que llegaste  ejecutar el window.open pero no funciono ej al tener ptos 0:");}
app.ExternalInterface.preloader_cb=function(percentage){var prelod_dynamic_path=document.getElementById("prelod_a_dynamic_path");var percantage_num=prelod_dynamic_path.nextElementSibling;prelod_dynamic_path.style.width=percentage+"%";percantage_num.innerHTML=percentage+"%";if(percentage==100){remove_preloader();return;}}
function remove_preloader(){var preloader_cont=document.getElementById("preloader_a_cont");setTimeout(function(){preloader_cont.style.visibility="hidden"},1000);}}
function runCode(app){function detect_mobile(){if(navigator.userAgent.match(/Android/i)||navigator.userAgent.match(/webOS/i)||navigator.userAgent.match(/iPhone/i)||navigator.userAgent.match(/iPad/i)||navigator.userAgent.match(/iPod/i)||navigator.userAgent.match(/BlackBerry/i)||navigator.userAgent.match(/Windows Phone/i)){console.log("estas en un movil;");return true;}else{console.log("no estas en un movil;");return false;}};if(!detect_mobile()){control_mouse(app);}
if(detect_mobile()){controls_touch(app);}
sound_listener_full(app);store_set_level_params(app);store_get_level_params(app);store_get_state_game_cb(app);function control_mouse(app){function onMouseMove(event){var pre_mov_cam;var movementX=event.movementX||event.mozMovementX||event.webkitMovementX||0;var movementY=event.movementY||event.mozMovementY||event.webkitMovementY||0;pre_mov_cam=movementX;app.ExternalInterface.setup_control_mouse(pre_mov_cam);}
document.getElementById("Container").addEventListener('mousemove',onMouseMove,true);function onStopMouseMove(event){if(app.stat_pt)
stat_pt=0;app.stat_pt=0;}}}});